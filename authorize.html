<!-- <meta http-equiv="refresh" content="0; URL=paypaygaltesting://authorize" /> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authorization Page</title>
</head>
<body>
  <h1>This is the authorization page</h1>
  <p>The app's webview should return to the app</p>
  <button id="myButton">Return to app</button>
  <script>
    // Code to extract parameters
    function getParameterByName(name) { 
      const url = window.location.href;
      name = name.replace(/[\[\]]/g, '\\$&'); // Escape special regex characters
      const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
      const results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
    function redirectToApp() {
      const oAuthState = getParameterByName('state');
      window.location.href = "paypaygaltesting://authorize/success?code=" + oAuthState;
    }
    document.getElementById('myButton').addEventListener('click', redirectToApp);
  </script>
</body>
</html>